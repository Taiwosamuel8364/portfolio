<%- include('partials/header') %>
<%- include('partials/navbar') %>

<div class="container-fluid p-0">
    <!-- Hero Section -->
    <section class="hero-section bg-primary text-white py-5">
        <div class="container py-5">
            <div class="row align-items-center">
                <div class="col-lg-8 mx-auto text-center" data-aos="fade-up">
                    <h1 class="display-4 fw-bold mb-4">My Projects</h1>
                    <p class="lead">
                        A showcase of my backend development work and technical expertise
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="py-4 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex flex-wrap justify-content-center gap-2" data-aos="fade-up">
                        <a href="/projects?category=all" 
                           class="btn <%= selectedCategory === 'all' ? 'btn-primary' : 'btn-outline-primary' %> btn-sm">
                            All Projects
                        </a>
                        <% categories.forEach(category => { %>
                            <a href="/projects?category=<%= category.toLowerCase().replace(/\s+/g, '-') %>" 
                               class="btn <%= selectedCategory === category.toLowerCase().replace(/\s+/g, '-') ? 'btn-primary' : 'btn-outline-primary' %> btn-sm">
                                <%= category %>
                            </a>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Grid -->
    <section class="py-5">
        <div class="container">
            <% if (projects.length === 0) { %>
                <div class="text-center py-5">
                    <i class="fas fa-search fa-4x text-muted mb-3"></i>
                    <h4>No projects found</h4>
                    <p class="text-muted">Try selecting a different category or view all projects.</p>
                    <a href="/projects" class="btn btn-primary">View All Projects</a>
                </div>
            <% } else { %>
                <div class="row">
                    <% projects.forEach((project, index) => { %>
                        <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="<%= index * 100 %>">
                            <div class="card project-card h-100">
                                <div class="card-img-container">
                                    <img src="<%= project.image %>" class="card-img-top" alt="<%= project.title %>" 
                                         onerror="this.src='/images/project-placeholder.jpg'">
                                    <div class="card-img-overlay d-flex align-items-center justify-content-center">
                                        <div class="text-center">
                                            <a href="/projects/<%= project.id %>" class="btn btn-primary btn-sm">
                                                <i class="fas fa-eye me-1"></i>View Details
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <h5 class="card-title mb-0"><%= project.title %></h5>
                                        <span class="badge bg-<%= project.status === 'Completed' ? 'success' : project.status === 'In Progress' ? 'warning' : 'secondary' %>">
                                            <%= project.status %>
                                        </span>
                                    </div>
                                    
                                    <p class="text-muted small mb-2"><%= project.category %></p>
                                    
                                    <p class="card-text flex-grow-1">
                                        <%= project.description.substring(0, 120) %>...
                                    </p>
                                    
                                    <!-- Tech Stack -->
                                    <div class="mb-3">
                                        <% project.techStack.slice(0, 3).forEach(tech => { %>
                                            <span class="badge bg-secondary me-1 mb-1"><%= tech %></span>
                                        <% }) %>
                                        <% if (project.techStack.length > 3) { %>
                                            <span class="badge bg-light text-dark">+<%= project.techStack.length - 3 %> more</span>
                                        <% } %>
                                    </div>
                                </div>
                                
                                <div class="card-footer bg-transparent">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="btn-group btn-group-sm" role="group">
                                            <% if (project.githubUrl) { %>
                                                <a href="<%= project.githubUrl %>" target="_blank" class="btn btn-outline-dark">
                                                    <i class="fab fa-github me-1"></i>Code
                                                </a>
                                            <% } %>
                                            <% if (project.liveUrl) { %>
                                                <a href="<%= project.liveUrl %>" target="_blank" class="btn btn-outline-primary">
                                                    <i class="fas fa-external-link-alt me-1"></i>Demo
                                                </a>
                                            <% } %>
                                        </div>
                                        <a href="/projects/<%= project.id %>" class="btn btn-primary btn-sm">
                                            Details
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }) %>
                </div>
            <% } %>
        </div>
    </section>

    <!-- Technology Stats -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5" data-aos="fade-up">
                <h3 class="h2 mb-3">Technologies Used</h3>
                <p class="lead text-muted">Most frequently used technologies across my projects</p>
            </div>
            
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="tech-stats" data-aos="fade-up">
                        <%
                            const techCount = {};
                            projects.forEach(project => {
                                project.techStack.forEach(tech => {
                                    techCount[tech] = (techCount[tech] || 0) + 1;
                                });
                            });
                            const sortedTech = Object.entries(techCount)
                                .sort(([,a], [,b]) => b - a)
                                .slice(0, 8);
                        %>
                        
                        <div class="row">
                            <% sortedTech.forEach(([tech, count]) => { %>
                                <div class="col-md-3 col-6 mb-3 text-center">
                                    <div class="tech-item">
                                        <div class="tech-circle mx-auto mb-2 d-flex align-items-center justify-content-center">
                                            <span class="fw-bold"><%= count %></span>
                                        </div>
                                        <h6 class="mb-0"><%= tech %></h6>
                                        <small class="text-muted">projects</small>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="py-5">
        <div class="container text-center" data-aos="fade-up">
            <h3 class="h2 mb-3">Like What You See?</h3>
            <p class="lead mb-4">
                I'm always working on new projects and looking for exciting opportunities to collaborate.
            </p>
            <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                <a href="/contact" class="btn btn-primary btn-lg">
                    <i class="fas fa-envelope me-2"></i>Start a Project
                </a>
                <a href="https://github.com/Taiwosamuel8364" target="_blank" class="btn btn-outline-primary btn-lg">
                    <i class="fab fa-github me-2"></i>View GitHub
                </a>
            </div>
        </div>
    </section>
</div>

<%- include('partials/footer') %>
