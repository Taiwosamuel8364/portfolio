<%- include('partials/header') %>
<%- include('partials/navbar') %>

<style>
@media (max-width: 768px) {
    .project-card {
        width: 100% !important;
        min-width: unset !important;
    }
}
@media (min-width: 769px) and (max-width: 1024px) {
    .project-card {
        width: calc(50% - 1rem) !important;
    }
}
.project-image-container:hover .project-overlay {
    opacity: 1 !important;
}
.project-card:hover {
    transform: translateY(-5px) !important;
    box-shadow: 0 8px 15px rgba(0,0,0,0.2) !important;
}
</style>

<div style="padding: 0;">
    <!-- Hero Section -->
    <section style="background: linear-gradient(135deg, #0d6efd 0%, #0056b3 100%); color: white; padding: 80px 0;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <div style="display: flex; align-items: center; justify-content: center;">
                <div style="max-width: 800px; text-align: center;">
                    <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem;">My Projects</h1>
                    <p style="font-size: 1.25rem;">
                        A showcase of my backend development work and technical expertise
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section style="padding: 40px 0; background-color: #f8f9fa;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;">
                <% if (selectedCategory === 'all') { %>
                    <a href="/projects?category=all" 
                       style="padding: 6px 16px; text-decoration: none; border-radius: 4px; font-size: 0.875rem; background-color: #0d6efd; color: white;">
                        All Projects
                    </a>
                <% } else { %>
                    <a href="/projects?category=all" 
                       style="padding: 6px 16px; text-decoration: none; border-radius: 4px; font-size: 0.875rem; background-color: transparent; color: #0d6efd; border: 1px solid #0d6efd;">
                        All Projects
                    </a>
                <% } %>
                <% categories.forEach(category => { %>
                    <% if (selectedCategory === category.toLowerCase().replace(/\s+/g, '-')) { %>
                        <a href="/projects?category=<%= category.toLowerCase().replace(/\s+/g, '-') %>" 
                           style="padding: 6px 16px; text-decoration: none; border-radius: 4px; font-size: 0.875rem; background-color: #0d6efd; color: white;">
                            <%= category %>
                        </a>
                    <% } else { %>
                        <a href="/projects?category=<%= category.toLowerCase().replace(/\s+/g, '-') %>" 
                           style="padding: 6px 16px; text-decoration: none; border-radius: 4px; font-size: 0.875rem; background-color: transparent; color: #0d6efd; border: 1px solid #0d6efd;">
                            <%= category %>
                        </a>
                    <% } %>
                <% }) %>
            </div>
        </div>
    </section>

    <!-- Projects Grid -->
    <section style="padding: 80px 0;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <% if (projects.length === 0) { %>
                <div style="text-align: center; padding: 80px 0;">
                    <div style="font-size: 4rem; margin-bottom: 1rem; color: #6c757d;">üîç</div>
                    <h4>No projects found</h4>
                    <p style="color: #6c757d;">Try selecting a different category or view all projects.</p>
                    <a href="/projects" style="background-color: #0d6efd; color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; font-weight: bold;">View All Projects</a>
                </div>
            <% } else { %>
                <div style="display: flex; flex-wrap: wrap; gap: 2rem; justify-content: flex-start;">
                    <% projects.forEach((project, index) => { %>
                        <div class="project-card" style="background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-direction: column; width: calc(33.333% - 1.33rem); min-width: 300px; height: auto;">
                            
                            <div class="project-image-container" style="position: relative; overflow: hidden;">
                                <img src="<%= project.image %>" 
                                     style="width: 100%; height: 200px; object-fit: cover;" 
                                     alt="<%= project.title %>" 
                                     onerror="this.src='/images/project-placeholder.jpg'">
                                <div class="project-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease;">
                                    <a href="/projects/<%= project.id %>" 
                                       style="background-color: #0d6efd; color: white; padding: 8px 16px; text-decoration: none; border-radius: 6px; font-size: 0.875rem;">
                                        üëÅÔ∏è View Details
                                    </a>
                                </div>
                            </div>
                            
                            <div style="padding: 1.5rem; flex: 1; display: flex; flex-direction: column;">
                                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
                                    <h5 style="margin: 0; font-size: 1.25rem; font-weight: bold;"><%= project.title %></h5>
                                    <% if (project.status === 'Completed') { %>
                                        <span style="background-color: #28a745; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">
                                            <%= project.status %>
                                        </span>
                                    <% } else if (project.status === 'In Progress') { %>
                                        <span style="background-color: #ffc107; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">
                                            <%= project.status %>
                                        </span>
                                    <% } else { %>
                                        <span style="background-color: #6c757d; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">
                                            <%= project.status %>
                                        </span>
                                    <% } %>
                                </div>
                                
                                <p style="color: #6c757d; font-size: 0.875rem; margin-bottom: 0.5rem;"><%= project.category %></p>
                                
                                <p style="flex: 1; margin-bottom: 1rem; line-height: 1.6;">
                                    <%= project.description.substring(0, 120) %>...
                                </p>
                                
                                <!-- Tech Stack -->
                                <div style="margin-bottom: 1rem;">
                                    <% project.techStack.slice(0, 3).forEach(tech => { %>
                                        <span style="background-color: #6c757d; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; margin-right: 0.25rem; margin-bottom: 0.25rem; display: inline-block;"><%= tech %></span>
                                    <% }) %>
                                    <% if (project.techStack.length > 3) { %>
                                        <span style="background-color: #f8f9fa; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">+<%= project.techStack.length - 3 %> more</span>
                                    <% } %>
                                </div>
                            </div>
                            
                            <div style="padding: 1rem 1.5rem; background-color: #f8f9fa; border-top: 1px solid #dee2e6;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="display: flex; gap: 0.5rem;">
                                        <% if (project.githubUrl) { %>
                                            <a href="<%= project.githubUrl %>" target="_blank" 
                                               style="border: 1px solid #495057; color: #495057; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 0.875rem;">
                                                üîó Code
                                            </a>
                                        <% } %>
                                        <% if (project.liveUrl) { %>
                                            <a href="<%= project.liveUrl %>" target="_blank" 
                                               style="border: 1px solid #0d6efd; color: #0d6efd; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 0.875rem;">
                                                üöÄ Demo
                                            </a>
                                        <% } %>
                                    </div>
                                    <a href="/projects/<%= project.id %>" 
                                       style="background-color: #0d6efd; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 0.875rem;">
                                        Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    <% }) %>
                </div>
            <% } %>
        </div>
    </section>

    <!-- Technology Stats -->
    <section style="padding: 80px 0; background-color: #f8f9fa;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <div style="text-align: center; margin-bottom: 3rem;">
                <h3 style="font-size: 2rem; margin-bottom: 1rem;">Technologies Used</h3>
                <p style="font-size: 1.25rem; color: #6c757d;">Most frequently used technologies across my projects</p>
            </div>
            
            <div style="max-width: 800px; margin: 0 auto;">
                <div>
                    <%
                        const techCount = {};
                        projects.forEach(project => {
                            project.techStack.forEach(tech => {
                                techCount[tech] = (techCount[tech] || 0) + 1;
                            });
                        });
                        const sortedTech = Object.entries(techCount)
                            .sort(([,a], [,b]) => b - a)
                            .slice(0, 8);
                    %>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 1.5rem; justify-content: center;">
                        <% sortedTech.forEach(([tech, count]) => { %>
                            <div style="text-align: center; min-width: 120px; flex: 0 0 auto;">
                                <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #0d6efd, #0056b3); color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; font-weight: bold; font-size: 1.25rem;">
                                    <%= count %>
                                </div>
                                <h6 style="margin-bottom: 0.25rem; font-weight: bold;"><%= tech %></h6>
                                <small style="color: #6c757d;">projects</small>
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section style="padding: 80px 0;">
        <div style="max-width: 800px; margin: 0 auto; padding: 0 20px; text-align: center;">
            <h3 style="font-size: 2rem; margin-bottom: 1rem;">Like What You See?</h3>
            <p style="font-size: 1.25rem; margin-bottom: 2rem;">
                I'm always working on new projects and looking for exciting opportunities to collaborate.
            </p>
            <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                    <a href="/contact" style="background-color: #0d6efd; color: white; padding: 16px 32px; text-decoration: none; border-radius: 8px; font-size: 1.125rem; font-weight: bold;">
                        ‚úâÔ∏è Start a Project
                    </a>
                    <a href="https://github.com/Taiwosamuel8364" target="_blank" style="border: 2px solid #0d6efd; color: #0d6efd; padding: 16px 32px; text-decoration: none; border-radius: 8px; font-size: 1.125rem; font-weight: bold;">
                        üîó View GitHub
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>

<%- include('partials/footer') %>
